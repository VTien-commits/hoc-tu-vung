<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4A90E2">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icon-192.png">
    <title>Học từ vựng</title>
</head>
<body>

    <!-- Màn hình 1: Chọn Chế độ chơi -->
    <div id="mode-selection-overlay" class="mode-overlay">
        <div class="mode-selection-box">
            <h2>Chế độ học từ vựng</h2>
            <p id="loading-status" class="loading-status">Đang tải dữ liệu...</p>

            <button id="mode-audio-button" class="mode-select-button" disabled>
                <span>🔊</span>
                Nghe & Nối
                <p>Nghe âm thanh và nối với nghĩa tiếng Việt.</p>
            </button>
            <button id="mode-text-button" class="mode-select-button" disabled>
                <span>📖</span>
                Đọc & Nối
                <p>Đọc từ tiếng Anh (kèm phiên âm) và nối với nghĩa.</p>
            </button>

            <!-- Nút Cài đặt -->
            <button id="settings-button" class="action-button secondary-button">Cài đặt ⚙️</button>
            <!-- Nút Tải lại -->
            <button id="reload-button" class="action-button secondary-button">Tải lại Ứng dụng</button>
        </div>
    </div>

    <!-- Màn hình 2: Chọn Chủ đề (MỚI) -->
    <div id="topic-selection-overlay" class="mode-overlay" style="display: none;">
        <div class="mode-selection-box">
            <h2>Chọn chủ đề</h2>
            <div id="topic-list" class="topic-list-container">
                <!-- Các nút chủ đề sẽ được JS chèn vào đây -->
            </div>
            <button id="topic-back-button" class="action-button secondary-button">Quay lại</button>
        </div>
    </div>

    <!-- Màn hình 3: Giao diện game chính -->
    <header style="display: none;">
        <!-- Nút Home (Thoát) -->
        <button id="home-button" class="header-button" title="Về trang chủ">🏠</button>
        
        <h1 id="game-title">Đang tải...</h1>
        
        <!-- (ĐÃ XÓA) Nút LƯU (SYNC) đã bị loại bỏ vì lưu tự động vào cache -->
        
        <div class="score-container">
            <span>Điểm</span>
            <span id="score">0</span>
        </div>
    </header>

    <main class="main-container" style="display: none;">
        <div class="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div id="game-container" class="game-container">
            <div id="left-column" class="column"></div>
            <div id="right-column" class="column"></div>
        </div>
        <button id="next-round-button" class="action-button" style="display: none;">Màn tiếp theo</button>
    </main>

    <!-- (MỚI) Modal Cài đặt -->
    <div id="settings-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Cài đặt</h2>
            <button id="stats-button" class="action-button">Thống kê Từ vựng</button>
            <button id="clear-cache-button" class="action-button secondary-button">Xóa Cache Audio</button>
            
            <!-- (MỚI) Thêm nút Xuất Excel -->
            <button id="export-excel-button" class="action-button secondary-button">Xuất dữ liệu (Excel)</button>
            
            <!-- Tạm thời vô hiệu hóa tính năng upload -->
            <label for="upload-excel" class="action-button disabled-button" title="Tính năng đang phát triển">
                Thêm từ (Excel)
            </label>
            <input type="file" id="upload-excel" accept=".xlsx, .xls" style="display: none;">
            
            <button id="settings-close-button" class="action-button modal-close-button">Đóng</button>
        </div>
    </div>

    <!-- (MỚI) Modal Thống kê -->
    <div id="stats-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content large">
            <h2>Thống kê Từ vựng</h2>
            <div id="stats-list" class="stats-list-container">
                <!-- Thống kê sẽ được JS chèn vào đây -->
            </div>
            <button id="stats-close-button" class="action-button modal-close-button">Đóng</button>
        </div>
    </div>

    <!-- Loader (Chung) -->
    <div id="loader" class="loader-overlay" style="display: none;">
        <div class="loader-content">
            <div class="spinner"></div>
            <p id="loader-text">Đang tải...</p>
        </div>
    </div>
</body>
<!-- (MỚI) Thêm thư viện SheetJS để xuất Excel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="main.js"></script>
</html>