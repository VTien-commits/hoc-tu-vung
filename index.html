<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4A90E2">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icon-192.png">
    <title>H·ªçc t·ª´ v·ª±ng</title>
</head>
<body>

    <!-- M√†n h√¨nh 1: Ch·ªçn Ch·∫ø ƒë·ªô ch∆°i -->
    <div id="mode-selection-overlay" class="mode-overlay">
        <div class="mode-selection-box">
            <h2>Ch·∫ø ƒë·ªô h·ªçc t·ª´ v·ª±ng</h2>
            <!-- (ƒê√É X√ìA) ƒê√£ x√≥a d√≤ng tr·∫°ng th√°i t·∫£i -->
            <!-- <p id="loading-status" class="loading-status">ƒêang t·∫£i d·ªØ li·ªáu...</p> -->

            <button id="mode-audio-button" class="mode-select-button" disabled>
                <span>üîä</span>
                Nghe & N·ªëi
                <p>Nghe √¢m thanh v√† n·ªëi v·ªõi nghƒ©a ti·∫øng Vi·ªát.</p>
            </button>
            <button id="mode-text-button" class="mode-select-button" disabled>
                <span>üìñ</span>
                ƒê·ªçc & N·ªëi
                <p>ƒê·ªçc t·ª´ ti·∫øng Anh (k√®m phi√™n √¢m) v√† n·ªëi v·ªõi nghƒ©a.</p>
            </button>

            <!-- N√∫t C√†i ƒë·∫∑t -->
            <button id="settings-button" class="action-button secondary-button">C√†i ƒë·∫∑t ‚öôÔ∏è</button>
            <!-- N√∫t T·∫£i l·∫°i -->
            <button id="reload-button" class="action-button secondary-button">T·∫£i l·∫°i ·ª®ng d·ª•ng</button>
        </div>
    </div>

    <!-- M√†n h√¨nh 2: Ch·ªçn Ch·ªß ƒë·ªÅ -->
    <div id="topic-selection-overlay" class="mode-overlay" style="display: none;">
        <div class="mode-selection-box">
            <h2>Ch·ªçn ch·ªß ƒë·ªÅ</h2>
            <div id="topic-list" class="topic-list-container">
                <!-- C√°c n√∫t ch·ªß ƒë·ªÅ s·∫Ω ƒë∆∞·ª£c JS ch√®n v√†o ƒë√¢y -->
            </div>
            <button id="topic-back-button" class="action-button secondary-button">Quay l·∫°i</button>
        </div>
    </div>

    <!-- M√†n h√¨nh 3: Giao di·ªán game ch√≠nh -->
    <header style="display: none;">
        <!-- N√∫t Home (Tho√°t) -->
        <button id="home-button" class="header-button" title="V·ªÅ trang ch·ªß">üè†</button>
        
        <h1 id="game-title">ƒêang t·∫£i...</h1>
        
        <div class="score-container">
            <span>ƒêi·ªÉm</span>
            <span id="score">0</span>
        </div>
    </header>

    <main class="main-container" style="display: none;">
        <div class="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
        <div id="game-container" class="game-container">
            <div id="left-column" class="column"></div>
            <div id="right-column" class="column"></div>
        </div>
        
        <!-- (M·ªöI) H√†ng ch·ª©a Timer v√† N√∫t Next -->
        <div id="game-footer" class="game-footer">
            <div id="timer" class="timer">01:00</div>
            <button id="next-round-button" class="action-button" style="display: none;">Next</button>
        </div>
    </main>

    <!-- Modal C√†i ƒë·∫∑t -->
    <div id="settings-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>C√†i ƒë·∫∑t</h2>
            <button id="stats-button" class="action-button">Th·ªëng k√™ T·ª´ v·ª±ng</button>
            <button id="clear-cache-button" class="action-button secondary-button">X√≥a Cache Audio</button>
            <button id="export-excel-button" class="action-button secondary-button">Xu·∫•t d·ªØ li·ªáu (Excel)</button>
            
            <!-- (M·ªöI) N√∫t Load Data Online -->
            <button id="load-online-button" class="action-button secondary-button">Load Data Online</button>
            <p id="load-online-status" class="loading-status" style="display: none;"></p>

            <!-- (M·ªöI) C√†i ƒë·∫∑t Timer -->
            <label for="timer-setting" class="settings-label">Th·ªùi gian ƒë·∫øm ng∆∞·ª£c (gi√¢y):</label>
            <input type="number" id="timer-setting" class="settings-input" value="60" min="10">
            
            <!-- T·∫°m th·ªùi v√¥ hi·ªáu h√≥a t√≠nh nƒÉng upload -->
            <!-- <label for="upload-excel" class="action-button disabled-button" title="T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn">
                Th√™m t·ª´ (Excel)
            </label> -->
            <!-- <input type="file" id="upload-excel" accept=".xlsx, .xls" style="display: none;"> -->
            
            <!-- (M·ªöI) N√∫t H·ªçc l·∫°i t·ª´ ƒë·∫ßu -->
            <button id="reset-progress-button" class="action-button modal-close-button">H·ªçc l·∫°i t·ª´ ƒë·∫ßu</button>
            
            <button id="settings-close-button" class="action-button secondary-button" style="margin-top: 20px;">ƒê√≥ng</button>
        </div>
    </div>

    <!-- Modal Th·ªëng k√™ -->
    <div id="stats-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content large">
            <h2>Th·ªëng k√™ T·ª´ v·ª±ng</h2>
            
            <!-- (M·ªöI) L·ªçc theo ch·ªß ƒë·ªÅ -->
            <label for="stats-topic-filter" class="settings-label" style="margin-top: 0;">L·ªçc theo ch·ªß ƒë·ªÅ:</label>
            <select id="stats-topic-filter" class="settings-input"></select>
            
            <div id="stats-list" class="stats-list-container">
                <!-- Th·ªëng k√™ s·∫Ω ƒë∆∞·ª£c JS ch√®n v√†o ƒë√¢y -->
            </div>
            <button id="stats-close-button" class="action-button modal-close-button">ƒê√≥ng</button>
        </div>
    </div>

    <!-- (M·ªöI) Modal X√°c nh·∫≠n Reset -->
    <div id="confirm-reset-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>X√°c nh·∫≠n</h2>
            <p style="font-size: 16px; line-height: 1.5; margin: 10px 0;">
                B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën reset to√†n b·ªô ti·∫øn ƒë·ªô v·ªÅ Level 0 kh√¥ng?
                <br>
                (T·ª´ v·ª±ng s·∫Ω kh√¥ng b·ªã m·∫•t).
            </p>
            <div class="confirm-buttons">
                <button id="confirm-reset-cancel" class="action-button secondary-button" style="width: 48%;">H·ªßy</button>
                <button id="confirm-reset-confirm" class="action-button modal-close-button" style="width: 48%; margin-top: 0;">X√°c nh·∫≠n</button>
            </div>
        </div>
    </div>


    <!-- Loader (Chung) -->
    <div id="loader" class="loader-overlay" style="display: none;">
        <div class="loader-content">
            <div class="spinner"></div>
            <p id="loader-text">ƒêang t·∫£i...</p>
        </div>
    </div>
</body>
<!-- (M·ªöI) Th√™m th∆∞ vi·ªán SheetJS ƒë·ªÉ xu·∫•t Excel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="main.js"></script>
</html>